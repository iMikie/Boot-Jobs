(function(){var t=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},e={}.hasOwnProperty;define(["jquery","backbone","lib/form"],function(e,n,r){var i,o,a,s,l;return l=function(t,e){return t.toggleClass("c-button--loading",e).prop("disabled",e)},s=function(t){var n;return(n=t.first().offset())?(e("html, body").animate({scrollTop:n.top-100},200),!0):!1},a="validation-error",{setLoading:l,FormContainer:i=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.VALIDATION_ERROR_CLASS=a,n.prototype.ERROR_CATCH_ALL_SELECTOR=".js-errors-catch-all",n.prototype.events=function(){return{"click .js-submit":"_submit","keypress input,select":"_keyDown"}},n.prototype.appendErrorToCatchAll=function(t){return this.$(this.ERROR_CATCH_ALL_SELECTOR).append("<span class='"+this.VALIDATION_ERROR_CLASS+"'>"+t+"</span>").show()},n.prototype.clearErrorCatchAll=function(){return this.$(this.ERROR_CATCH_ALL_SELECTOR).html("").hide()},n.prototype.scrollToErrors=function(){var t;return t=this.$(this.ERROR_CATCH_ALL_SELECTOR),t.is(":visible")?s(t):void 0},n.prototype._handleSuccess=function(){return l(this.$(".js-submit"),!1)},n.prototype._handleError=function(t){var e,n,r,i,o;if(l(this.$(".js-submit"),!1),!_.isEmpty(t.base)){for(i=t.base,o=[],e=0,n=i.length;n>e;e++)r=i[e],o.push(this.appendErrorToCatchAll(r));return o}},n.prototype._submit=function(){var t;return t=this.$(".js-submit"),t.prop("disabled")?void 0:(l(t,!0),this.clearErrorCatchAll(),this._form().ajaxSubmit({dataType:"json",success:function(t){return function(e){return t._handleSuccess(e)}}(this),error:function(t){return function(e){var n;return t._handleError(null!=(n=e.responseJSON)?n.errors:void 0)}}(this)}),!1)},n.prototype._keyDown=function(t){return 13!==t.which?!0:(this.$(t.target).nextAll("input").first().focus(),!1)},n}(n.View),PartialForm:o=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.INPUT_CONTAINER_SELECTOR=".js-input-container",n.prototype.VALIDATION_ERROR_CLASS=a,n.prototype.initialize=function(){return this.formObjectName=this.$el.data("form-object-name")},n.prototype.handleErrors=function(t){var e,n,r,i;i=[];for(n in t)r=t[n],e=this.$("#"+this.formObjectName+"_"+n),e.length>0&&(this._setInputError(e,r[0]),i.push(n));return i},n.prototype.scrollToErrors=function(){return s(this.$("."+this.VALIDATION_ERROR_CLASS))},n.prototype.removeErrors=function(t){var e,n,i,o;for(o=(t||this.$el).find(".fieldWithErrors").children(),n=0,i=o.length;i>n;n++)e=o[n],r.clearInputError(e);return t?void 0:this.$("."+this.VALIDATION_ERROR_CLASS).remove()},n.prototype._appendError=function(t,e){return this.$(t).append("<span class='"+this.VALIDATION_ERROR_CLASS+"'>"+e+"</span>").show()},n.prototype._setInputError=function(t,e){var n;return n=t.parents(this.INPUT_CONTAINER_SELECTOR).first(),0===n.length&&(n=t),r.setInputError(n.first(),e,{div:!0})},n}(n.View),showSectionToggle:function(t,e){return t.find(e).on("click",function(e){var n,r,i;return n=t.find(e.target),(i=n.hide().data("show"))&&t.find(i)[n.data("method")||"slideDown"](),(r=n.hide().data("hide"))?t.find(r).hide():void 0})}}})}).call(this);